<div id="main-bar" class="main-bar__container">
  <div class="main-bar">
    <div class="main-bar__logo">
      <%= render partial: "layouts/decidim/logo", locals: { organization: current_organization } %>
    </div>
    <div class="main-bar__search">
      <%= render partial: "layouts/decidim/header/main_search" %>
    </div>

    <div class="main-bar__links-desktop">


      <% if available_locales.length > 1 %>
        <div class="main-header__language-container">
          <button id="trigger-dropdown-language-chooser" data-component="dropdown" data-target="dropdown-menu-language-chooser" class="main-footer__language-trigger">
            <%= icon "global-line" %>
            <span><%= t("short_name", scope: "locale") %></span>
            <span class="sr-only">
              <% available_locales.each do |locale| %>
                <span lang="<%= locale %>">
                  <%= I18n.with_locale(locale) { t("layouts.decidim.language_chooser.choose_language") } %>
                </span>
              <% end %>
            </span>
          </button>

          <div id="dropdown-menu-language-chooser" aria-hidden="false" role="menu" aria-labelledby="trigger-dropdown-language-chooser" tabindex="-1">
            <ul class="main-footer__languag absolute" role="menu">
              <% (available_locales - [I18n.locale.to_s]).each do |locale| %>
                <li class="text-secondary text-md hover:bg-secondary hover:text-white transition" role="presentation">
                  <%= link_to locale.upcase, decidim.locale_path(locale:), method: :post, role: "menuitem", lang: locale, class: "w-full block" %>
                </li>
              <% end %>
            </ul>
          </div>
        </div>
      <% end %>


      <%= render partial: "layouts/decidim/header/main_links_desktop" %>
    </div>




    <div class="lg:hidden">
      <%# Main dropdown mobile %>
      <button id="main-dropdown-summary-mobile" class="main-bar__links-mobile__trigger"
        data-component="dropdown"
        data-target="dropdown-menu-main-mobile">
        <%= icon "menu-line" %><span class="sr-only"><%= t("main_menu", scope: "layouts.decidim.header") %></span>
      </button>

      <div id="dropdown-menu-main-mobile" class="main-bar__links-mobile__dropdown" aria-hidden="true">
        <%= render partial: "layouts/decidim/header/menu_breadcrumb_main_dropdown", locals: { id: "breadcrumb-main-dropdown-mobile" } %>
      </div>

      <%# Sticky menu mobile %>
      <div class="main-bar__links-mobile">
        <%= render partial: "layouts/decidim/header/main_links_mobile" %>
      </div>

      <%# Overlay menus mobile %>
      <%= render partial: "layouts/decidim/header/main_links_mobile_search" %>
      <%= render partial: "layouts/decidim/header/main_links_mobile_account" if current_user %>
    </div>
  </div>
</div>
