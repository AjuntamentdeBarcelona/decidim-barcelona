{"version":3,"file":"js/_rbenv_versions_2_7_5_lib_ruby_gems_2_7_0_bundler_gems_decidim-f920e99dc728_decidim-admin_app-16f163.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAAA;;AAAA;;AACA;AACA;AACA;AAEA;AACA;;;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AAEA;AACA;AAJA;AAMA;AACA;AACA;AACA;AAFA;AAKA;AACA;AAFA;AAKA;AACA;AACA;AAZA;AAcA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnCA;AACA;AAAA;;AAAA;;AACA;AACA;AACA;AAEA;AACA;;;;AAEA;AAAA;;AACA;AAEA;AACA;AACA;;AAEA;AACA;AADA;AAGA;AACA;;AAEA;AACA;AACA;AAZA;AAcA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1BA;;;AACA;AACA;AAAA;;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;;AACA;;AACA;AACA;;;;AAEA;AACA;AACA;AACA;AADA;AAIA;AALA;;AAQA;AACA;AACA;AACA;;AAEA;AACA;AAAA;AAAA;AANA;AAUA;;;AACA;;AAEA;AACA;AACA;AACA;AAGA;;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAbA;AAeA;;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAtCA;AAwCA;;;AAEA;AAAA;;AACA;AAAA;AACA;AAAA;AADA;;AAIA;AACA;AAAA;AACA;AAAA;AADA;AAGA;;AAEA;AACA;AAAA;AACA;AAAA;AADA;AAGA;;AAEA;AAAA;AACA;AAAA;AADA;;AAIA;AACA;AAAA;AACA;AAAA;AADA;AAGA;;AAEA;AACA;AAAA;AACA;AAAA;AADA;AAGA;AACA;;;AAEA;AACA;AACA;;AAEA;AACA;AADA;AAGA;;AACA;AACA;AAGA;AACA;AACA;AACA;;;;AACA;AAAA;AACA;AACA;AAGA;AACA;AACA;;AACA;AACA;;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAEA;AAEA;;AACA;AACA;AADA;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;;AAEA;AACA;AARA;AAUA;AACA;;AAEA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AAEA;;AAEA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AAEA;;AAEA;AACA;AACA;AACA;;;AAEA;AAAA;AAEA;AACA;AACA;;;AACA;AACA;AACA;AAEA;AACA;AAEA;AAHA;AAKA;;;AAEA;AACA;AAEA;AACA;;;;;;AAGA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7OA;;;AACA;;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;AACA;AACA;AACA;;AAEA;AACA;AACA;AALA;AAOA;;;AAIA;AACA;AACA","sources":["webpack://app/../../../../.rbenv/versions/2.7.5/lib/ruby/gems/2.7.0/bundler/gems/decidim-f920e99dc728/decidim-admin/app/packs/src/decidim/admin/auto_buttons_by_position.component.js","webpack://app/../../../../.rbenv/versions/2.7.5/lib/ruby/gems/2.7.0/bundler/gems/decidim-f920e99dc728/decidim-admin/app/packs/src/decidim/admin/auto_label_by_position.component.js","webpack://app/../../../../.rbenv/versions/2.7.5/lib/ruby/gems/2.7.0/bundler/gems/decidim-f920e99dc728/decidim-admin/app/packs/src/decidim/admin/dynamic_fields.component.js","webpack://app/../../../../.rbenv/versions/2.7.5/lib/ruby/gems/2.7.0/bundler/gems/decidim-f920e99dc728/decidim-admin/app/packs/src/decidim/admin/sort_list.component.js"],"sourcesContent":["export default class AutoButtonsByPositionComponent {\n  constructor(options = {}) {\n    this.listSelector = options.listSelector;\n    this.hideOnFirstSelector = options.hideOnFirstSelector;\n    this.hideOnLastSelector = options.hideOnLastSelector;\n\n    this.run();\n  }\n\n  run() {\n    const $list = $(this.listSelector);\n    const hideOnFirst = this.hideOnFirstSelector;\n    const hideOnLast = this.hideOnLastSelector;\n\n    if ($list.length === 1) {\n      const $item = $list.first();\n\n      $item.find(hideOnFirst).hide();\n      $item.find(hideOnLast).hide();\n    } else {\n      $list.each((idx, el) => {\n        if (el.id === $list.first().attr(\"id\")) {\n          $(el).find(hideOnFirst).hide();\n          $(el).find(hideOnLast).show();\n        }\n        else if (el.id === $list.last().attr(\"id\")) {\n          $(el).find(hideOnLast).hide();\n          $(el).find(hideOnFirst).show();\n        }\n        else {\n          $(el).find(hideOnLast).show();\n          $(el).find(hideOnFirst).show();\n        }\n      });\n    }\n  }\n}\n","export default class AutoLabelByPositionComponent {\n  constructor(options = {}) {\n    this.listSelector = options.listSelector;\n    this.labelSelector = options.labelSelector;\n    this.onPositionComputed = options.onPositionComputed;\n\n    this.run();\n  }\n\n  run() {\n    const $list = $(this.listSelector);\n\n    $list.each((idx, el) => {\n      const $label = $(el).find(this.labelSelector);\n      const labelContent = $label.html();\n\n      if (labelContent.match(/#(\\d+)/)) {\n        $label.html(labelContent.replace(/#(\\d+)/, `#${idx + 1}`));\n      } else {\n        $label.html(`${labelContent} #${idx + 1}`);\n      }\n\n      if (this.onPositionComputed) {\n        this.onPositionComputed(el, idx);\n      }\n    });\n  }\n}\n","/* eslint-disable require-jsdoc */\nclass DynamicFieldsComponent {\n  constructor(options = {}) {\n    this.wrapperSelector = options.wrapperSelector;\n    this.containerSelector = options.containerSelector;\n    this.fieldSelector = options.fieldSelector;\n    this.addFieldButtonSelector = options.addFieldButtonSelector;\n    this.addSeparatorButtonSelector = options.addSeparatorButtonSelector;\n    this.addTitleAndDescriptionButtonSelector = options.addTitleAndDescriptionButtonSelector;\n    this.fieldTemplateSelector = options.fieldTemplateSelector;\n    this.separatorTemplateSelector = options.separatorTemplateSelector;\n    this.TitleAndDescriptionTemplateSelector = options.TitleAndDescriptionTemplateSelector;\n    this.removeFieldButtonSelector = options.removeFieldButtonSelector;\n    this.moveUpFieldButtonSelector = options.moveUpFieldButtonSelector;\n    this.moveDownFieldButtonSelector = options.moveDownFieldButtonSelector;\n    this.onAddField = options.onAddField;\n    this.onRemoveField = options.onRemoveField;\n    this.onMoveUpField = options.onMoveUpField;\n    this.onMoveDownField = options.onMoveDownField;\n    this.placeholderId = options.placeholderId;\n    this.elementCounter = 0;\n    this._enableInterpolation();\n    this._activateFields();\n    this._bindEvents();\n  }\n\n  _enableInterpolation() {\n    $.fn.replaceAttribute = function(attribute, placeholder, value) {\n      $(this).find(`[${attribute}*=${placeholder}]`).addBack(`[${attribute}*=${placeholder}]`).each((index, element) => {\n        $(element).attr(attribute, $(element).attr(attribute).replace(placeholder, value));\n      });\n\n      return this;\n    }\n\n    $.fn.template = function(placeholder, value) {\n      // See the comment below in the `_addField()` method regarding the\n      // `<template>` tag support in IE11.\n      const $subtemplate = $(this).find(\"template, .decidim-template\");\n\n      if ($subtemplate.length > 0) {\n        $subtemplate.html((index, oldHtml) => $(oldHtml).template(placeholder, value)[0].outerHTML);\n      }\n\n      // Handle those subtemplates that are mapped with the `data-template`\n      // attribute. This is also because of the IE11 support.\n      const $subtemplateParents = $(this).find(\"[data-template]\");\n\n      if ($subtemplateParents.length > 0) {\n        $subtemplateParents.each((_i, elem) => {\n          const $self = $(elem);\n          const $tpl = $($self.data(\"template\"));\n\n          // Duplicate the sub-template with a unique ID as there may be\n          // multiple parent templates referring to the same sub-template.\n          const $subtpl = $($tpl[0].outerHTML);\n          const subtemplateId = `${$tpl.attr(\"id\")}-${value}`;\n          const subtemplateSelector = `#${subtemplateId}`;\n          $subtpl.attr(\"id\", subtemplateId);\n          $self.attr(\"data-template\", subtemplateSelector).data(\"template\", subtemplateSelector);\n          $tpl.after($subtpl);\n\n          $subtpl.html((index, oldHtml) => $(oldHtml).template(placeholder, value)[0].outerHTML);\n        });\n      }\n\n      $(this).replaceAttribute(\"id\", placeholder, value);\n      $(this).replaceAttribute(\"name\", placeholder, value);\n      $(this).replaceAttribute(\"data-tabs-content\", placeholder, value);\n      $(this).replaceAttribute(\"for\", placeholder, value);\n      $(this).replaceAttribute(\"tabs_id\", placeholder, value);\n      $(this).replaceAttribute(\"href\", placeholder, value);\n\n      return this;\n    }\n  }\n\n  _bindEvents() {\n    $(this.wrapperSelector).on(\"click\", this.addFieldButtonSelector, (event) =>\n      this._bindSafeEvent(event, () => this._addField(this.fieldTemplateSelector))\n    );\n\n    if (this.addSeparatorButtonSelector) {\n      $(this.wrapperSelector).on(\"click\", this.addSeparatorButtonSelector, (event) =>\n        this._bindSafeEvent(event, () => this._addField(this.separatorTemplateSelector))\n      );\n    }\n\n    if (this.addTitleAndDescriptionButtonSelector) {\n      $(this.wrapperSelector).on(\"click\", this.addTitleAndDescriptionButtonSelector, (event) =>\n        this._bindSafeEvent(event, () => this._addField(this.TitleAndDescriptionTemplateSelector))\n      );\n    }\n\n    $(this.wrapperSelector).on(\"click\", this.removeFieldButtonSelector, (event) =>\n      this._bindSafeEvent(event, (target) => this._removeField(target))\n    );\n\n    if (this.moveUpFieldButtonSelector) {\n      $(this.wrapperSelector).on(\"click\", this.moveUpFieldButtonSelector, (event) =>\n        this._bindSafeEvent(event, (target) => this._moveUpField(target))\n      );\n    }\n\n    if (this.moveDownFieldButtonSelector) {\n      $(this.wrapperSelector).on(\"click\", this.moveDownFieldButtonSelector, (event) =>\n        this._bindSafeEvent(event, (target) => this._moveDownField(target))\n      );\n    }\n  }\n\n  _bindSafeEvent(event, cb) {\n    event.preventDefault();\n    event.stopPropagation();\n\n    try {\n      return cb(event.target);\n    } catch (error) {\n      console.error(error); // eslint-disable-line no-console\n      return error;\n    }\n  }\n\n  // Adds a field.\n  //\n  // template - A String matching the type of the template. Expected to be\n  //  either \".decidim-question-template\" or \".decidim-separator-template\".\n  _addField(templateClass = \".decidim-template\") {\n    const $wrapper = $(this.wrapperSelector);\n    const $container = $wrapper.find(this.containerSelector);\n\n    // Allow defining the template using a `data-template` attribute on the\n    // wrapper element. This is to allow child templates which would otherwise\n    // be impossible using `<script type=\"text/template\">`. See the comment\n    // below regarding the `<template>` tag and IE11.\n    const templateSelector = $wrapper.data(\"template\");\n    let $template = null;\n    if (templateSelector) {\n      $template = $(templateSelector);\n    }\n    if ($template === null || $template.length < 1) {\n      // To preserve IE11 backwards compatibility, the views are using\n      // `<script type=\"text/template\">` with a given `class` instead of\n      // `<template>`. The `<template> tags are parsed in IE11 along with the\n      // DOM which may cause the form elements inside them to break the forms\n      // as they are submitted with them.\n      $template = $wrapper.children(`template, ${templateClass}`);\n    }\n\n    const $newField = $($template.html()).template(this.placeholderId, this._getUID());\n\n    $newField.find(\"ul.tabs\").attr(\"data-tabs\", true);\n\n    const $lastQuestion = $container.find(this.fieldSelector).last()\n    if ($lastQuestion.length > 0) {\n      $lastQuestion.after($newField);\n    } else {\n      $newField.appendTo($container);\n    }\n\n    $newField.foundation();\n\n    if (this.onAddField) {\n      this.onAddField($newField);\n    }\n  }\n\n  _removeField(target) {\n    const $target = $(target);\n    const $removedField = $target.parents(this.fieldSelector);\n    const idInput = $removedField.find(\"input\").filter((idx, input) => input.name.match(/id/));\n\n    if (idInput.length > 0) {\n      const deletedInput = $removedField.find(\"input\").filter((idx, input) => input.name.match(/delete/));\n\n      if (deletedInput.length > 0) {\n        $(deletedInput[0]).val(true);\n      }\n\n      $removedField.addClass(\"hidden\");\n      $removedField.hide();\n    } else {\n      $removedField.remove();\n    }\n\n    if (this.onRemoveField) {\n      this.onRemoveField($removedField);\n    }\n  }\n\n  _moveUpField(target) {\n    const $target = $(target);\n    const $movedUpField = $target.parents(this.fieldSelector);\n\n    $movedUpField.prev().before($movedUpField);\n\n    if (this.onMoveUpField) {\n      this.onMoveUpField($movedUpField);\n    }\n  }\n\n  _moveDownField(target) {\n    const $target = $(target);\n    const $movedDownField = $target.parents(this.fieldSelector);\n\n    $movedDownField.next().after($movedDownField);\n\n    if (this.onMoveDownField) {\n      this.onMoveDownField($movedDownField);\n    }\n  }\n\n  _activateFields() {\n    // Move the `<script type=\"text/template\">` elements to the bottom of the\n    // list container so that they will not cause the question moving\n    // functionality to break since it assumes that all children elements are\n    // the dynamic field list child items.\n    const $wrapper = $(this.wrapperSelector);\n    const $container = $wrapper.find(this.containerSelector);\n    $container.append($container.find(\"script\"));\n\n    $(this.fieldSelector).each((idx, el) => {\n      $(el).template(this.placeholderId, this._getUID());\n\n      $(el).find(\"ul.tabs\").attr(\"data-tabs\", true);\n    })\n  }\n\n  _getUID() {\n    this.elementCounter += 1;\n\n    return (new Date().getTime()) + this.elementCounter;\n  }\n}\n\nexport default function createDynamicFields(options) {\n  return new DynamicFieldsComponent(options);\n}\n","/* eslint-disable require-jsdoc */\nimport sortable from \"html5sortable/dist/html5sortable.es\"\n\nclass SortListComponent {\n\n  /**\n   * Creates a sortable list using hmtl5sortable function.\n   *\n   * @param {String} sortListSelector The list selector that has to be sortable.\n   * @param {Object} options An object containing the same options as html5sortable. It also includes\n   *                an extra option `onSortUpdate`, a callback which returns the children collection\n   *                whenever the list order has been changed.\n   *\n   * @returns {void} Nothing.\n   */\n  constructor(sortListSelector, options) {\n    if ($(sortListSelector).length > 0) {\n      sortable(sortListSelector, options)[0].addEventListener(\"sortupdate\", (event) => {\n        const $children = $(event.target).children();\n\n        if (options.onSortUpdate) {\n          options.onSortUpdate($children);\n        }\n      });\n    }\n  }\n}\n\nexport default function createSortList(sortListSelector, options) {\n  return new SortListComponent(sortListSelector, options);\n}\n"],"names":[],"sourceRoot":""}